name: Katalon API
on:
  push:
  schedule:
    - cron: '0 17 * * *' #at 5 pm (23:00 pm UTC) 
  

jobs:
  build:
    runs-on: windows-latest
    steps:
    #Pull most recent repo to examine test suites
    - name: Pull from Repo
      uses: actions/checkout@v1
    #Begin Test Execution
    - name: Katalon Studio Github Action
      uses: katalon-studio/katalon-studio-github-action@v2
      with:
          version: '7.5.5'
          projectPath: '${{ github.workspace }}'
          args: '-noSplash -retry=0 -browserType=Chrome -testSuitePath="Test Suites/Customer Scenarios" -apiKey= '8ad1cbe2-af76-413e-ac8d-3aead3a2cd7b' --config -webui.autoUpdateDrivers=true'
    #Email on Success
    - name: Successful Test
      if: success()
      run : echo "${{ toJSON(job) }}"
    #Email on Failure
    - name: Failed Test
      if: cancelled()
      run: echo "This is where we will email failure"